Options +FollowSymlinks

RewriteEngine On

RewriteBase /




RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.php -f
RewriteRule ^(.*)$ $1.php [NC,L] 


# rewrite to NON-WWW
RewriteCond %{HTTP_HOST} ^www\.(.*)$ [NC]
RewriteRule ^(.*)$ /$1 [R=301,L]


# rewrite to HTTPS
RewriteCond %{HTTPS} !=on
RewriteRule ^(.*)$ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301,NE]
Header always set Content-Security-Policy "upgrade-insecure-requests;"


# shit ton of caching
ExpiresActive On
ExpiresByType text/css "access plus 1 weeks"
ExpiresByType application/javascript "access plus 1 weeks"
ExpiresByType application/x-javascript "access plus 1 weeks"
ExpiresByType image/x-icon "access plus 1 months"

ExpiresByType image/gif A2592000
ExpiresByType image/png A2592000
ExpiresByType image/jpg A2592000
ExpiresByType image/jpeg A2592000
SetEnv no-gzip dont-vary

AddOutputFilterByType DEFLATE text/plain
AddOutputFilterByType DEFLATE text/html
AddOutputFilterByType DEFLATE text/xml
AddOutputFilterByType DEFLATE text/shtml
AddOutputFilterByType DEFLATE text/css
AddOutputFilterByType DEFLATE text/php
AddOutputFilterByType DEFLATE application/xml
AddOutputFilterByType DEFLATE application/xhtml+xml
AddOutputFilterByType DEFLATE application/rss+xml
AddOutputFilterByType DEFLATE application/javascript
AddOutputFilterByType DEFLATE application/x-javascript

DirectoryIndex index.php

# 404 doc
ErrorDocument 404 /404/index.php
# 503 document goes here. it's in plaintext, yes.
ErrorDocument 503 '<link rel="preconnect" href="https://fonts.gstatic.com"><link href="https://fonts.googleapis.com/css2?family=Comfortaa:wght@300;400;500;600;700&amp;display=swap" rel="stylesheet"><style>    *{        padding: 0px;        margin: 0px;        color: #fff;        font-family: "Comfortaa";    }    body{        background-color: #0b0c11;    }</style><div style="height: 100vh; width: 100vw; display: flex; flex-direction: column; justify-content: center; align-content: center; justify-items: center; align-items: center;"><h1>Oh no, our servers seem to be having a little trouble.</h1><p>Please try again in a bit.</p></div>'

# ! < TOOLS REWRITING > ! #
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^tools\/(.*)$ /tools/tool.php?page=$1 [NC,L,QSA]
RedirectMatch 404 ^/tools/src/(.*)/index.php$
# ! </ TOOLS REWRITING > ! #



# tempdown

#RewriteRule profiles(.*)$ /offline-application.html [L]
#RewriteRule snapshots(.*)$ /offline-application.html [L]
#RewriteRule rankings(.*)$ /offline-application.html [L]

<If "%{REMOTE_ADDR} != 'your_ip_here' >
    #RewriteRule ^(.*)$ /offline-difficultues.html [L]
</If>